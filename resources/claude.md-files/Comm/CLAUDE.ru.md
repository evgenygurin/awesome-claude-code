# Руководство по разработке проекта Comm

## Команды сборки и тестирования

- Запуск тестов: `yarn workspace [lib|web|keyserver|native] test`
- Тестирование всех пакетов: `yarn jest:all`
- Запуск линтера: `yarn eslint:all`
- Исправление проблем линтера: `yarn eslint:fix`
- Проверка типов Flow: `yarn flow:all` или `yarn workspace [workspace] flow`
- Запуск сервера разработки: `yarn workspace [workspace] dev`
- Чистая установка: `yarn cleaninstall`

## Стиль кода

### Типы

- Используйте Flow для статической типизации с включенным строгим режимом
- Всегда включайте аннотацию `// @flow` в начале JS-файлов
- Экспортируйте типы с явным именованием: `export type MyType = {...}`

### Форматирование

- Prettier с ограничением строки в 80 символов
- Одинарные кавычки, завершающие запятые
- Избегайте скобок в стрелочных функциях, когда это возможно
- Файлы компонентов React именуются как \*.react.js

### Именование

- kebab-case для имен файлов (обеспечивается unicorn/filename-case)
- Описательные имена переменных

### Импорты

- Группируйте импорты с пустыми строками между встроенными/внешними и внутренними
- Сортируйте импорты в алфавитном порядке внутри групп
- Не используйте относительные импорты между рабочими пространствами - используйте ссылки на рабочие пространства

### React

- Используйте функциональные компоненты с хуками
- Следуйте правилу исчерпывающих зависимостей для useEffect/useCallback
- Свойства компонентов должны использовать явные типы Flow

### Обработка ошибок

- Используйте согласованные возвраты в функциях
- Обрабатывайте все отклонения промисов

